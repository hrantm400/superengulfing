import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r,u as N,a as S}from"./index-QScjhSTK.js";import{u as k,a as E}from"./LocaleContext-83TzI_2y.js";import{u as L}from"./index-CbJBlSim.js";import{L as P}from"./components-CDq68o1-.js";const C="",$=()=>{var g;const[o,b]=r.useState(""),[l,h]=r.useState(""),[d,t]=r.useState(""),[m,u]=r.useState(!1),n=N(),f=S(),{localizePath:y}=k(),{t:a}=L(),{profile:i,refetch:v}=E(),p=(g=f.state)==null?void 0:g.message;r.useEffect(()=>{if(i){const s=i.locale==="am"?"/am":"";n(`${s}/dashboard`,{replace:!0})}},[i,n]);const j=async s=>{if(s.preventDefault(),!o.trim()||!l){t("login.errorRequired");return}t(""),u(!0);try{const x=await fetch(`${C}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.trim(),password:l})}),c=await x.json().catch(()=>({}));if(!x.ok){t("login.errorInvalid");return}if(c.token){localStorage.setItem("auth_token",c.token),await v();const w=c.locale==="am"?"/am":"";n(`${w}/dashboard`)}else t("login.invalidResponse")}catch{t("login.serverError")}finally{u(!1)}};return e.jsxs("div",{className:"relative min-h-screen flex flex-col items-center justify-center px-4 sm:px-6 py-24",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",children:e.jsx("div",{className:"absolute top-1/4 left-1/2 w-[400px] h-[400px] bg-primary/5 rounded-full blur-[120px] -translate-x-1/2 -translate-y-1/2"})}),e.jsxs("div",{className:"relative z-10 w-full max-w-md animate-fade-in-up",children:[e.jsxs("div",{className:"rounded-card border border-border bg-surface/80 backdrop-blur-sm p-8 md:p-10 shadow-card hover:shadow-card-hover hover:-translate-y-1 hover:border-primary/20 transition-all duration-300",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:a("login.title")}),e.jsx("p",{className:"text-muted text-sm mb-8",children:a("login.subtitle")}),p&&e.jsx("p",{className:"text-sm text-primary mb-4",children:p}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-muted mb-2",children:a("login.placeholderEmail")}),e.jsx("input",{id:"login-email",type:"email",value:o,onChange:s=>b(s.target.value),placeholder:"you@example.com",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground placeholder-muted focus:border-primary focus:ring-2 focus:ring-primary/50 outline-none transition-all duration-300",autoComplete:"email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"login-password",className:"block text-sm font-medium text-muted mb-2",children:a("login.placeholderPassword")}),e.jsx("input",{id:"login-password",type:"password",value:l,onChange:s=>h(s.target.value),placeholder:"••••••••",className:"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground placeholder-muted focus:border-primary focus:ring-2 focus:ring-primary/50 outline-none transition-all duration-300",autoComplete:"current-password"})]}),d&&e.jsx("p",{className:"text-sm text-amber-400 animate-scale-in",children:a(d)}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-primary hover:bg-primary/90 text-black font-bold py-3 px-4 rounded-lg shadow-glow-primary-sm hover:shadow-glow-primary hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 disabled:opacity-50 disabled:hover:scale-100",children:a(m?"login.loggingIn":"login.button")}),!1]})]}),e.jsxs("p",{className:"text-center text-muted text-sm mt-6",children:[a("login.needAccess")," ",e.jsx(P,{to:y("/course-access"),className:"text-primary hover:underline underline-offset-2 transition-colors duration-200",children:a("login.accessPage")})]})]})]})};export{$ as L};
