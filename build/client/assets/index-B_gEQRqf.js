import{c as A}from"./createLucideIcon-CnELezcF.js";import{j as M}from"./jsx-runtime-0DLF9kdB.js";import{r as s}from"./index-QScjhSTK.js";import{M as D,i as I,u as W,P as K,a as U,b as q,L as B}from"./proxy-tOwQgLwi.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ee=A("sparkles",F);function S(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function G(...e){return r=>{let t=!1;const o=e.map(u=>{const c=S(u,r);return!t&&typeof c=="function"&&(t=!0),c});if(t)return()=>{for(let u=0;u<o.length;u++){const c=o[u];typeof c=="function"?c():S(e[u],null)}}}}function N(...e){return s.useCallback(G(...e),e)}class T extends s.Component{getSnapshotBeforeUpdate(r){const t=this.props.childRef.current;if(t&&r.isPresent&&!this.props.isPresent){const o=t.offsetParent,u=I(o)&&o.offsetWidth||0,c=I(o)&&o.offsetHeight||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=u-n.width-n.left,n.bottom=c-n.height-n.top}return null}componentDidUpdate(){}render(){return this.props.children}}function V({children:e,isPresent:r,anchorX:t,anchorY:o,root:u}){var m;const c=s.useId(),n=s.useRef(null),g=s.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:y}=s.useContext(D),k=((m=e.props)==null?void 0:m.ref)??(e==null?void 0:e.ref),a=N(n,k);return s.useInsertionEffect(()=>{const{width:f,height:p,top:d,left:C,right:x,bottom:w}=g.current;if(r||!n.current||!f||!p)return;const j=t==="left"?`left: ${C}`:`right: ${x}`,$=o==="bottom"?`bottom: ${w}`:`top: ${d}`;n.current.dataset.motionPopId=c;const l=document.createElement("style");y&&(l.nonce=y);const R=u??document.head;return R.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${p}px !important;
            ${j}px !important;
            ${$}px !important;
          }
        `),()=>{R.contains(l)&&R.removeChild(l)}},[r]),M.jsx(T,{isPresent:r,childRef:n,sizeRef:g,children:s.cloneElement(e,{ref:a})})}const X=({children:e,initial:r,isPresent:t,onExitComplete:o,custom:u,presenceAffectsLayout:c,mode:n,anchorX:g,anchorY:y,root:k})=>{const a=W(Y),m=s.useId();let f=!0,p=s.useMemo(()=>(f=!1,{id:m,initial:r,isPresent:t,custom:u,onExitComplete:d=>{a.set(d,!0);for(const C of a.values())if(!C)return;o&&o()},register:d=>(a.set(d,!1),()=>a.delete(d))}),[t,a,o]);return c&&f&&(p={...p}),s.useMemo(()=>{a.forEach((d,C)=>a.set(C,!1))},[t]),s.useEffect(()=>{!t&&!a.size&&o&&o()},[t]),n==="popLayout"&&(e=M.jsx(V,{isPresent:t,anchorX:g,anchorY:y,root:k,children:e})),M.jsx(K.Provider,{value:p,children:e})};function Y(){return new Map}const P=e=>e.key||"";function H(e){const r=[];return s.Children.forEach(e,t=>{s.isValidElement(t)&&r.push(t)}),r}const te=({children:e,custom:r,initial:t=!0,onExitComplete:o,presenceAffectsLayout:u=!0,mode:c="sync",propagate:n=!1,anchorX:g="left",anchorY:y="top",root:k})=>{const[a,m]=U(n),f=s.useMemo(()=>H(e),[e]),p=n&&!a?[]:f.map(P),d=s.useRef(!0),C=s.useRef(f),x=W(()=>new Map),w=s.useRef(new Set),[j,$]=s.useState(f),[l,R]=s.useState(f);q(()=>{d.current=!1,C.current=f;for(let h=0;h<l.length;h++){const i=P(l[h]);p.includes(i)?(x.delete(i),w.current.delete(i)):x.get(i)!==!0&&x.set(i,!1)}},[l,p.length,p.join("-")]);const b=[];if(f!==j){let h=[...f];for(let i=0;i<l.length;i++){const E=l[i],v=P(E);p.includes(v)||(h.splice(i,0,E),b.push(E))}return c==="wait"&&b.length&&(h=b),R(H(h)),$(f),null}const{forceRender:L}=s.useContext(B);return M.jsx(M.Fragment,{children:l.map(h=>{const i=P(h),E=n&&!a?!1:f===l||p.includes(i),v=()=>{if(w.current.has(i))return;if(w.current.add(i),x.has(i))x.set(i,!0);else return;let z=!0;x.forEach(_=>{_||(z=!1)}),z&&(L==null||L(),R(C.current),n&&(m==null||m()),o&&o())};return M.jsx(X,{isPresent:E,initial:!d.current||t?void 0:!1,custom:r,presenceAffectsLayout:u,mode:c,root:k,onExitComplete:E?void 0:v,anchorX:g,anchorY:y,children:h},i)})})};export{te as A,ee as S};
