import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{u as F,r as a}from"./index-QScjhSTK.js";import{u as q}from"./LocaleContext-83TzI_2y.js";import{u as I}from"./index-CbJBlSim.js";import{a as w,b as O}from"./api-c0T8i5BA.js";import{L as k}from"./components-CDq68o1-.js";import{c as d}from"./createLucideIcon-CnELezcF.js";import{B as c}from"./book-open-DpnmxrYp.js";import{P as _}from"./play-DVjtrMIX.js";import{C as R}from"./chevron-right-DgoQG_vz.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],B=d("flame",T);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],H=d("funnel",G);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],U=d("search",J);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],D=d("timer",Y),le=()=>{const C=F(),{localizePath:m}=q(),{t:r}=I(),[l,x]=a.useState([]),[L,u]=a.useState([]),[S,h]=a.useState(!0),[p,$]=a.useState(""),[o,z]=a.useState("all"),[b,f]=a.useState(null);a.useEffect(()=>{(async()=>{h(!0);try{const[t,y]=await Promise.all([w("/api/courses/my-courses"),fetch(`${O()}/api/courses`)]);if(t.ok){const i=await t.json();x(i.courses||[])}if(y.ok){const i=await y.json();u(i.courses||[])}}catch{x([]),u([])}finally{h(!1)}})()},[]);const P=new Set(l.map(s=>s.id)),g=L.filter(s=>!P.has(s.id)),n=p.trim().toLowerCase(),j=a.useMemo(()=>{let s=l;if(o==="in_progress")s=s.filter(t=>t.progress_percent>0&&t.progress_percent<100);else if(o==="completed")s=s.filter(t=>t.progress_percent>=100);else if(o==="available")return[];return n&&(s=s.filter(t=>t.title.toLowerCase().includes(n))),s},[l,o,n]),v=a.useMemo(()=>{if(o!=="all"&&o!=="available")return[];let s=g;return n&&(s=s.filter(t=>t.title.toLowerCase().includes(n))),s},[g,o,n]),A=async s=>{f(s);try{(await w("/api/enrollments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({course_id:s})})).ok&&C(m(`/dashboard/courses/${s}`))}finally{f(null)}},N=l.length?Math.round(l.reduce((s,t)=>s+t.progress_percent,0)/l.length):0,E=l.reduce((s,t)=>s+t.total_lessons,0),M=l.reduce((s,t)=>s+t.completed_lessons,0);return e.jsxs("div",{className:"min-h-screen flex flex-col relative",children:[e.jsx("div",{className:"fixed inset-0 grid-bg pointer-events-none z-0","aria-hidden":!0}),e.jsx("main",{className:"flex-1 relative z-10 pt-20 md:pt-24 px-4 md:px-6 lg:px-8 pb-4 md:pb-6 lg:pb-8",children:e.jsxs("div",{className:"max-w-[1440px] mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end md:items-center gap-4",children:[e.jsx("div",{children:e.jsxs(k,{to:m("/dashboard"),className:"text-muted hover:text-foreground text-sm mb-2 inline-block",children:["â† ",r("nav.dashboard")]})}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative group flex-1 md:flex-none",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted group-hover:text-tech-blue transition-colors"}),e.jsx("input",{type:"text",placeholder:r("academy.searchModules"),value:p,onChange:s=>$(s.target.value),className:"bg-surface/60 border border-border rounded-btn py-2.5 pl-10 pr-4 text-sm text-foreground focus:outline-none focus:border-tech-blue/50 focus:ring-1 focus:ring-tech-blue/50 w-full md:w-64 transition-all placeholder:text-muted"})]}),e.jsx("button",{type:"button",className:"p-2.5 rounded-btn bg-surface/60 border border-border hover:border-tech-blue/50 text-muted hover:text-foreground transition-all","aria-label":"Filter",children:e.jsx(H,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","in_progress","completed","available"].map(s=>e.jsx("button",{type:"button",onClick:()=>z(s),className:`px-5 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${o===s?"bg-tech-blue/10 border border-tech-blue/30 text-tech-blue shadow-glow-primary-sm":"bg-white/5 border border-border text-muted hover:text-foreground hover:bg-white/10"}`,children:r(s==="all"?"academy.allCourses":s==="in_progress"?"academy.inProgress":s==="completed"?"academy.completed":"academy.available")},s))}),S?e.jsx("div",{className:"glass-panel rounded-card p-8 text-center text-muted",children:r("course.loadingCourse")}):e.jsxs("div",{className:"space-y-6",children:[j.map(s=>e.jsxs(k,{to:`/dashboard/courses/${s.id}`,className:"glass-card-tech rounded-card p-6 flex flex-col md:flex-row gap-6 group relative overflow-hidden block",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-tech-blue to-transparent opacity-50"}),e.jsxs("div",{className:"w-full md:w-64 h-40 md:h-auto min-h-[160px] rounded-xl overflow-hidden relative flex-shrink-0 border border-border",children:[s.image_url?e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url(${s.image_url})`}}):e.jsx("div",{className:"absolute inset-0 bg-surfaceElevated flex items-center justify-center",children:e.jsx(c,{className:"w-12 h-12 text-muted"})}),e.jsx("div",{className:"absolute inset-0 bg-black/30 group-hover:bg-black/10 transition-colors"}),e.jsx("div",{className:"absolute top-2 left-2 bg-black/60 backdrop-blur-md px-2 py-1 rounded text-[10px] font-bold text-white uppercase tracking-wider border border-white/10",children:s.progress_percent>=100?r("academy.completed"):r("academy.inProgress")}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"size-12 rounded-full bg-tech-blue/90 flex items-center justify-center text-black shadow-glow-primary-sm",children:e.jsx(_,{className:"w-6 h-6 ml-0.5"})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between min-w-0",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground group-hover:text-tech-blue transition-colors",children:s.title}),e.jsx("span",{className:"bg-primary/10 text-primary border border-primary/20 px-2 py-0.5 rounded text-xs font-bold shrink-0",children:s.progress_percent>=100?r("academy.done"):r("academy.level1")})]}),e.jsx("p",{className:"text-muted text-sm line-clamp-2 mb-4",children:s.description||"No description."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-6 text-xs text-muted font-mono",children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"w-3.5 h-3.5"})," ",s.completed_lessons,"/",s.total_lessons," Lessons"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-muted",children:[s.progress_percent,"% Complete"]}),e.jsx("span",{className:"text-tech-blue font-bold",children:"Continue"})]}),e.jsx("div",{className:"w-full bg-white/5 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-tech-blue to-primary h-full rounded-full transition-all shadow-glow-primary-sm",style:{width:`${s.progress_percent}%`}})})]})]})]})]},s.id)),v.map(s=>e.jsxs("div",{className:"glass-card-tech rounded-card p-6 flex flex-col md:flex-row gap-6 group relative",children:[e.jsxs("div",{className:"w-full md:w-64 h-40 md:h-auto min-h-[160px] rounded-xl overflow-hidden relative flex-shrink-0 border border-border",children:[s.image_url?e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url(${s.image_url})`}}):e.jsx("div",{className:"absolute inset-0 bg-surfaceElevated flex items-center justify-center",children:e.jsx(c,{className:"w-12 h-12 text-muted"})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors"}),e.jsx("div",{className:"absolute top-2 left-2 bg-tech-blue/20 backdrop-blur-md px-2 py-1 rounded text-[10px] font-bold text-tech-blue uppercase tracking-wider border border-tech-blue/30",children:"New"})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between min-w-0",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground group-hover:text-tech-blue transition-colors",children:s.title}),e.jsx("span",{className:"bg-orange-500/10 text-orange-400 border border-orange-500/20 px-2 py-0.5 rounded text-xs font-bold shrink-0",children:"Level 1"})]}),e.jsx("p",{className:"text-muted text-sm line-clamp-2 mb-4",children:s.description||"No description."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-6 text-xs text-muted font-mono",children:e.jsxs("span",{children:[s.lesson_count||0," Lessons"]})}),e.jsxs("button",{type:"button",onClick:()=>A(s.id),disabled:b===s.id,className:"px-6 py-2 rounded-btn bg-white/5 hover:bg-tech-blue/10 border border-border hover:border-tech-blue/50 text-foreground font-medium text-sm transition-all flex items-center gap-2 w-fit disabled:opacity-50",children:[b===s.id?r("dashboard.enrolling"):r("academy.enroll"),e.jsx(R,{className:"w-4 h-4 text-tech-blue"})]})]})]})]},s.id)),j.length===0&&v.length===0&&e.jsxs("div",{className:"glass-panel rounded-card p-10 text-center text-muted",children:[e.jsx(c,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:r("academy.noCoursesMatch")})]})]})]}),e.jsx("div",{className:"lg:col-span-4 space-y-6",children:e.jsxs("div",{className:"glass-panel rounded-card p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-10 -right-10 size-32 bg-tech-blue/20 rounded-full blur-3xl","aria-hidden":!0}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Your Learning Stats"})}),e.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[e.jsxs("div",{className:"relative size-24 flex-shrink-0",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white/5"}),e.jsx("div",{className:"absolute inset-0 rounded-full progress-circle flex items-center justify-center",style:{"--progress":`${N}%`},children:e.jsxs("div",{className:"bg-surface size-20 rounded-full flex flex-col items-center justify-center relative z-10",children:[e.jsxs("span",{className:"text-xl font-bold text-foreground",children:[N,"%"]}),e.jsx("span",{className:"text-[9px] text-muted uppercase tracking-wide",children:"Overall"})]})})]}),e.jsx("div",{className:"space-y-3 flex-1",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted mb-1",children:"Lessons"}),e.jsxs("p",{className:"text-sm font-bold text-foreground",children:[M," / ",E," completed"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-border hover:border-tech-blue/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(D,{className:"w-4 h-4 text-tech-blue"}),e.jsx("span",{className:"text-xs text-muted",children:"Courses"})]}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:l.length})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-border hover:border-primary/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(B,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-xs text-muted",children:"Completed"})]}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:l.filter(s=>s.progress_percent>=100).length})]})]})]})})]})]})})]})};export{le as A};
